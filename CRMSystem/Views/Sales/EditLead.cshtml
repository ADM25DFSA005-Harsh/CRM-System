@model SalesAutomation.Models.Lead

@{

    ViewData["Title"] = "Edit Lead";

    var salutations = ViewBag.Salutations as List<string>;

    var regions = ViewBag.Regions as List<string>;

    var statuses = ViewBag.Statuses as List<string>;

    var sources = ViewBag.Sources as List<SelectListItem>;

    var reps = ViewBag.AssignedReps as List<SelectListItem>;

}
 
<div class="container mt-4">
<h2>Edit Lead</h2>
<br />
<form method="post" class="row g-3 mb-4" asp-action="Edit" asp-controller="Sales">

        @Html.AntiForgeryToken()
<input type="hidden" asp-for="LeadID" />
<div class="row">
<div class="col-md-4 mb-3">
<label asp-for="Salutation" class="form-label">Salutation</label>
<select asp-for="Salutation" class="form-select" required>
<option value="">Select</option>

                    @foreach (var s in salutations)

                    {
<option value="@s" selected="@(Model.Salutation == s ? "selected" : null)">@s</option>

                    }
</select>
<span asp-validation-for="Salutation" class="text-danger"></span>
</div>
 
            <div class="col-md-4 mb-3">
<label asp-for="FirstName" class="form-label">First Name</label>
<input asp-for="FirstName" class="form-control" required />
<span asp-validation-for="FirstName" class="text-danger"></span>
</div>
 
            <div class="col-md-4 mb-3">
<label asp-for="LastName" class="form-label">Last Name</label>
<input asp-for="LastName" class="form-control" required />
<span asp-validation-for="LastName" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="JobTitle" class="form-label">Job Title</label>
<input asp-for="JobTitle" class="form-control" />
<span asp-validation-for="JobTitle" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="Email" class="form-label">Email</label>
<input asp-for="Email" class="form-control" type="email" required />
<span asp-validation-for="Email" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="MobileNumber" class="form-label">Mobile Number</label>
<input asp-for="MobileNumber" class="form-control" type="tel" required />
<span asp-validation-for="MobileNumber" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="Region" class="form-label">Region</label>
<select asp-for="Region" class="form-select" required>
<option value="">Select</option>

                    @foreach (var r in regions)

                    {
<option value="@r" selected="@(Model.Region == r ? "selected" : null)">@r</option>

                    }
</select>
<span asp-validation-for="Region" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="Source" class="form-label">Source</label>
<select asp-for="Source" class="form-select">
<option value="">Select</option>

                    @foreach (var src in sources)

                    {
<option value="@src.Value" selected="@(Model.Source == src.Value ? "selected" : null)">@src.Text</option>

                    }
</select>
<span asp-validation-for="Source" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="Status" class="form-label">Status</label>
<select asp-for="Status" class="form-select" required>
<option value="">Select</option>

                    @foreach (var s in statuses)

                    {
<option value="@s" selected="@(Model.Status == s ? "selected" : null)">@s</option>

                    }
</select>
<span asp-validation-for="Status" class="text-danger"></span>
</div>
 
            <div class="col-md-6 mb-3">
<label asp-for="AssignedTo" class="form-label">Assigned To</label>
<select asp-for="AssignedTo" class="form-select">
<option value="">Select</option>

                    @foreach (var rep in reps)

                    {
<option value="@rep.Value" selected="@(Model.AssignedTo == rep.Value ? "selected" : null)">@rep.Text</option>

                    }
</select>
<span asp-validation-for="AssignedTo" class="text-danger"></span>
</div>
</div>
 
        <div class="mt-4">
<button type="submit" class="btn btn-primary">Save Changes</button>
<button type="button" class="btn btn-secondary" onclick="confirmCancel()">Cancel</button>
</div>
</form>
</div>
 
@section Scripts {
<partial name="_ValidationScriptsPartial" />
<script>

        function confirmCancel() {

            if (confirm("Are you sure you want to cancel? Unsaved changes will be lost.")) {

                window.location.href = '@Url.Action("Details", "Leads", new { id = Model.LeadID, success = "cancelled" })';

            }

        }
</script>

}
 
 